# CQM 開発ガイドライン

## 開発フロー
1. **Issue作成** → 作業内容明確化
2. **ブランチ作成** → `feature/issue-123-description`
3. **実装** → コード作成・テスト追加
4. **品質チェック** → lint/type-check/test
5. **プルリクエスト** → レビュー・マージ

## 設計パターン
- **プラグインアーキテクチャ**: 拡張可能な設計
- **依存注入**: インターフェース経由の疎結合
- **イベント駆動**: プラグイン間通信
- **型安全性**: TypeScript strict mode

## パフォーマンス考慮
- **チャンク処理**: 大きな文書の分割処理
- **キャッシュ**: 埋め込み・検索結果のキャッシュ
- **ストリーミング**: リアルタイムデータ処理
- **メモリ管理**: リークチェック・最適化

## セキュリティ
- **入力検証**: 全外部入力のバリデーション
- **APIキー管理**: 環境変数・設定ファイル分離
- **権限制御**: プラグインスコープ制限
- **ログ**: 機密情報の除外

## テスト戦略
- **ユニットテスト**: 各関数・クラス単位
- **統合テスト**: コンポーネント間連携
- **E2Eテスト**: 実際のワークフロー
- **カバレッジ**: 80%以上維持

## ドキュメント方針
- **技術文書**: 英語（設計・実装詳細）
- **ユーザー文書**: 日本語（使い方・例）
- **コメント**: 簡潔・必要最小限
- **更新**: コード変更と同時更新

## プラグイン開発
- **標準インターフェース**: `IPlugin`実装
- **設定スキーマ**: Zod によるバリデーション
- **エラーハンドリング**: 適切な例外処理
- **テスト**: プラグイン専用テストスイート

## 品質基準
- **TypeScript**: strict mode + no-explicit-any
- **ESLint**: recommended rules準拠
- **Prettier**: 自動フォーマット
- **テスト**: 新機能には必須
- **ドキュメント**: API変更時は必須更新